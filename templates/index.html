<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Forensic Tool - Blockchain Integrated</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1>ğŸ” Cyber Forensic Investigation Platform</h1>
            <p class="subtitle">Blockchain-Integrated Evidence Management System</p>
            <div class="header-info">
                <span>ğŸ‘¤ Investigator: <strong>{{ investigator }}</strong></span>
                <span>ğŸ¢ Organization: <strong>{{ organization }}</strong></span>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container main-content">
        
        <!-- System Information -->
        <section class="card">
            <h2>ğŸ’» System Information</h2>
            <div id="systemInfo" class="system-info">
                <p>Loading system information...</p>
            </div>
        </section>

        <!-- Tools Availability -->
        <section class="card">
            <h2>ğŸ”§ Available Tools</h2>
            <div id="toolsInfo" class="tools-info">
                <div class="tools-section">
                    <h3>Core Tools (Always Available)</h3>
                    <div id="coreTools" class="tool-list">Loading...</div>
                </div>
                <div class="tools-section">
                    <h3>Advanced Tools</h3>
                    <div id="advancedTools" class="tool-list">Loading...</div>
                </div>
            </div>
        </section>

        <!-- Status Section -->
        <section class="card status-card">
            <h2>ğŸ“Š Session Status</h2>
            <div id="sessionStatus" class="status-info">
                <p>No active session. Start a forensic investigation to begin.</p>
            </div>
        </section>

        <!-- Configuration Check -->
        <section class="card">
            <h2>âš™ï¸ System Configuration</h2>
            <button onclick="checkConfiguration()" class="btn btn-secondary">Check Configuration</button>
            <button onclick="checkTools()" class="btn btn-secondary">Check Available Tools</button>
            <div id="configResult" class="result-box"></div>
        </section>

        <!-- Forensic Execution -->
        <section class="card">
            <h2>ğŸ”¬ Start Forensic Investigation</h2>
            <p>Select forensic types to execute:</p>
            
            <div class="checkbox-group">
                <label>
                    <input type="checkbox" id="forensic_all" value="all" onchange="toggleAllForensics(this)">
                    <strong>All Forensics</strong>
                </label>
            </div>
            
            <div class="checkbox-group">
                <label>
                    <input type="checkbox" class="forensic-type" value="disk">
                    ğŸ’¾ Disk Forensics
                </label>
                <label>
                    <input type="checkbox" class="forensic-type" value="memory">
                    ğŸ§  Memory Forensics
                </label>
                <label>
                    <input type="checkbox" class="forensic-type" value="network">
                    ğŸŒ Network Forensics
                </label>
                <label>
                    <input type="checkbox" class="forensic-type" value="log">
                    ğŸ“ Log Analysis
                </label>
            </div>
            
            <!-- Advanced Tools Option -->
            <div class="checkbox-group advanced-tools-option">
                <label style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 8px;">
                    <input type="checkbox" id="useAdvancedTools" style="width: 20px; height: 20px;">
                    <strong>ğŸš€ Use Advanced Tools</strong>
                    <span style="display: block; font-size: 0.9em; margin-top: 5px; opacity: 0.9;">
                        Enable TSK, Foremost, Wireshark for enhanced analysis
                    </span>
                </label>
            </div>
            
            <button onclick="startForensics()" class="btn btn-primary" id="startBtn">
                ğŸš€ Start Investigation
            </button>
            
            <div id="forensicProgress" class="progress-container" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">Initializing...</p>
            </div>
            
            <!-- Command Execution Log -->
            <div id="commandLog" class="command-log" style="display: none;">
                <h3>ğŸ“‹ Command Execution Log</h3>
                <div id="commandLogContent" class="command-log-content"></div>
            </div>
            
            <div id="forensicResult" class="result-box"></div>
            
            <!-- Detailed Findings -->
            <div id="detailedFindings" class="detailed-findings" style="display: none;"></div>
        </section>

        <!-- Blockchain Registration -->
        <section class="card">
            <h2>â›“ï¸ Blockchain Registration</h2>
            <p>Register evidence on Sepolia testnet for immutable chain of custody.</p>
            
            <button onclick="checkBalance()" class="btn btn-secondary">Check Wallet Balance</button>
            <button onclick="registerBlockchain()" class="btn btn-primary" id="blockchainBtn" disabled>
                ğŸ“ Register on Blockchain
            </button>
            
            <div id="blockchainResult" class="result-box"></div>
        </section>

        <!-- Report Generation -->
        <section class="card">
            <h2>ğŸ“„ Generate Forensic Report</h2>
            <p>Generate comprehensive legal report using AI analysis.</p>
            
            <button onclick="generateReport()" class="btn btn-primary" id="reportBtn" disabled>
                ğŸ“Š Generate Report
            </button>
            
            <div id="reportProgress" class="progress-container" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="reportProgressFill"></div>
                </div>
                <p id="reportProgressText">Generating report...</p>
            </div>
            
            <div id="reportResult" class="result-box"></div>
            
            <div id="downloadSection" style="display: none; margin-top: 20px;">
                <h3>Download Reports:</h3>
                <button onclick="downloadReport('json')" class="btn btn-success">
                    ğŸ“¥ Download JSON Report
                </button>
                <button onclick="downloadReport('text')" class="btn btn-success">
                    ğŸ“¥ Download Text Report
                </button>
            </div>
        </section>

        <!-- Evidence Verification -->
        <section class="card">
            <h2>âœ… Verify Evidence Integrity</h2>
            <p>Verify evidence hash against blockchain record.</p>
            
            <div class="input-group">
                <label for="evidenceId">Evidence ID:</label>
                <input type="text" id="evidenceId" placeholder="EVD_20240101_120000">
            </div>
            
            <div class="input-group">
                <label for="evidenceHash">Evidence Hash:</label>
                <input type="text" id="evidenceHash" placeholder="SHA-256 hash">
            </div>
            
            <button onclick="verifyEvidence()" class="btn btn-secondary">
                ğŸ” Verify
            </button>
            
            <div id="verifyResult" class="result-box"></div>
        </section>

    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Cyber Forensic Tool | Blockchain-Integrated Evidence Management</p>
            <p class="small">Built with Flask, Web3.py, Groq LLM | Deployed on Sepolia Testnet</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>